<div class="dialog" appNoRightClick>
  <div class="header">
    <h1 mat-dialog-title class="mb-0">{{ data.title }}</h1>
  </div>
  <div mat-dialog-content>
    <p class="dialog-message mb-3">{{ data.message }}</p>

    <div class="controls" *ngIf="data?.confirm">
      <mat-form-field>
        <mat-label>Start Date</mat-label>
        <input matInput [matDatepicker]="picker" [min]="data.startDate" [(ngModel)]="data.startDate">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <mat-label>End Date</mat-label>
        <input matInput [matDatepicker]="picker2" [min]="data.startDate" [(ngModel)]="data.endDate">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Comments for others</mat-label>
        <textarea matInput placeholder="Enter your comments..." [(ngModel)]="data.comments"></textarea>
      </mat-form-field>
    </div>
    <div class="controls" *ngIf="data?.setStatus">
      <mat-form-field>
        <mat-label>Expiry Date</mat-label>
        <input matInput [matDatepicker]="picker2" [min]="data.startDate" [(ngModel)]="data.endDate">
        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
        <mat-datepicker #picker2></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <textarea [(ngModel)]="data.markUnEligibleReason" matInput placeholder="Your comments..." rows="6"></textarea>
      </mat-form-field>
      <div class="status-btns">
        <button mat-raised-button (click)="setStatus('DEFERRED')" color="accent" class="m-2"
          [disabled]="data.markUnEligibleReason === ''">{{'Deferred' | uppercase}}</button>
        <button mat-raised-button (click)="setStatus('APPROVED')" color="primary" class="m-2"
          [disabled]="data.markUnEligibleReason === ''">{{'Approved' | uppercase}}</button>
        <button mat-raised-button (click)="setStatus('REJECTED')" color="warn" class="m-2"
          [disabled]="data.markUnEligibleReason === ''">{{'Rejected' | uppercase}}</button>
      </div>
    </div>
    <div class="controls" *ngIf="data?.setStages">
      <div class="status-btns">
        <!-- <button mat-raised-button (click)="setStatus('PRELIMINARY_APPRAISAL')" color="primary" class="m-2">{{'Enable
          Preliminary appraisal' | uppercase}}
        </button>
        <button mat-raised-button (click)="setStatus('EXTENDED_APPRAISAL')" color="primary" class="m-2">{{'Enable
          extended appraisal' | uppercase}}
        </button> -->
        <button mat-raised-button (click)="setStatus('TAC_MEETING')" color="accent" class="m-2">{{'Enable Tac' |
          uppercase}}
        </button>
        <button mat-raised-button (click)="setStatus('BOD_MEETING')" color="accent" class="m-2">{{'Enable BOD' |
          uppercase}}
        </button>
        <button mat-raised-button (click)="setStatus('RMC_MEETING')" color="accent" class="m-2">{{'Enable RMC' |
          uppercase}}
        </button>
        <!-- <button mat-raised-button (click)="setStatus('GIA')" color="accent" class="m-2">{{'Enable gia' | uppercase}}
        </button>
        <button [disabled]="selectedProject?.gia.status === 'Not Initiated'" mat-raised-button
          (click)="setStatus('GIA_CHECKLIST')" color="accent" class="m-2">{{'Checklist to
          FIP' | uppercase}}
        </button>
        <button [disabled]="selectedProject?.gia?.status === 'Not Initiated' && 
        selectedProject?.giaChecklist === null" mat-raised-button (click)="setStatus('OFFER_LETTER')" color="accent"
          class="m-2">{{'Enable Offer Letter'
          | uppercase}}
        </button> -->
        <!-- <button mat-raised-button (click)="setStatus('MARKED_TO_GM')" color="accent"
          class="m-2">{{'marked to gm' | uppercase}}
        </button> -->
        <button color="warn" mat-raised-button class="m-2" (click)="cancel()">{{ data.cancelText }}
        </button>
      </div>
    </div>

    <div class="controls" *ngIf="data?.offerLetter">
      <mat-form-field appearance="outline">
        <mat-label>Expiry Date</mat-label>
        <input matInput [matDatepicker]="picker" [min]="data.endDate" [(ngModel)]="data.endDate">
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Comments</mat-label>
        <textarea matInput [(ngModel)]="data.comments" name="comments" id="comments" cols="30" rows="10"></textarea>
      </mat-form-field>

    </div>

    <div class="controls" *ngIf="data?.selectThematic">

      <mat-form-field *ngIf="data?.taSelectionType === 'eligibility'">
        <mat-select (selectionChange)="areaChanged($event)" placeholder="Select Areas" [formControl]="areas" multiple>
          <mat-select-trigger>
            <span *ngFor="let item of areas.value; let i=index">
              <span *ngIf="i===0">{{item.name}}</span>
            </span>
            <span *ngIf="areas.value?.length > 1" class="example-additional-selection">
              (+{{areas.value.length - 1}} others)
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let object of data?.areas;" [value]="object">{{object.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <section *ngIf="areas?.value?.length">

        <div *ngFor="let area of areas.value; let i = index;">
          <mat-form-field appearance="outline">
            <mat-label>{{area.name}} Experience</mat-label>
            <input type="number" matInput placeholder="Enter years" [(ngModel)]="area.experience">
          </mat-form-field>
          <section class="example-section" *ngIf="i === areas.value.length - 1">
            <label class="example-margin">Availability of counterpart Financing:</label>
            <mat-radio-group [(ngModel)]="area.counterpart">
              <mat-radio-button class="example-margin" value="yes">Yes</mat-radio-button>
              <mat-radio-button class="example-margin" value="no">No</mat-radio-button>
            </mat-radio-group>
          </section>
        </div>
      </section>

      <section *ngIf="data?.taSelectionType !== 'eligibility'">
        <mat-checkbox (change)="asvailableAsJvChanged($event)" [formControl]="applyAsJv">Available as JV!</mat-checkbox>

        <!-- <mat-form-field *ngIf="showJvUsers">
          <mat-select (selectionChange)="jvUsersChanged($event)" placeholder="Select User" [formControl]="jvUsers">
            <mat-option *ngFor="let object of allJvUsers;" [value]="object">
              {{object.firstName}}&nbsp;{{object.lastName}}
            </mat-option>
          </mat-select>
        </mat-form-field> -->
        <mat-form-field *ngIf="showJvUsers" appearance="outline">
          <mat-label>Please enter preffered name</mat-label>
          <input type="text" matInput placeholder="Enter Name Here..." [formControl]="jvUsers">
        </mat-form-field>
      </section>

    </div>

    <div class="controls" *ngIf="data?.subProcess">
      <section>
        <mat-form-field class="mb-2" appearance="outline">
          <mat-label>Please enter preffered number</mat-label>
          <input type="number" matInput placeholder="Enter Name Here..." [(ngModel)]="data.subProcessNumber">
        </mat-form-field>
        <mat-form-field class="mb-2" appearance="outline">
          <mat-label>Please enter preffered name</mat-label>
          <input type="text" matInput placeholder="Enter Name Here..." [(ngModel)]="data.subProcessName">
        </mat-form-field>
      </section>
    </div>

    <div class="controls" *ngIf="data?.proposal_initmation">
      <mat-form-field appearance="outline">
        <mat-select (selectionChange)="proposalSectionChanged($event)" placeholder="Select Sections"
          [formControl]="proposalSections" multiple>
          <mat-select-trigger>
            <span *ngFor="let item of proposalSections.value; let i=index">
              <span *ngIf="i===0">{{item.name || item.sectionName}}</span>
            </span>
            <span *ngIf="proposalSections.value?.length > 1" class="example-additional-selection">
              (+{{proposalSections.value.length - 1}} others)
            </span>
          </mat-select-trigger>
          <mat-option *ngFor="let object of data?.proposal_sections;" [value]="object">{{object.name ||
            object.sectionName}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline">
        <mat-label>Your comments</mat-label>
        <textarea [(ngModel)]="data.comments" matInput placeholder="Enter here..." cols="30" rows="10"></textarea>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.ceoDecision && data?.confirmComments">
      <mat-form-field appearance="outline">
        <mat-label>Your comments</mat-label>
        <textarea [(ngModel)]="data.comments" matInput placeholder="Enter here..." cols="30" rows="10"></textarea>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.confirmAction && data?.confirmComments">
      <mat-form-field appearance="outline">
        <mat-label>Your comments</mat-label>
        <textarea [(ngModel)]="data.comments" matInput placeholder="Enter here..." cols="30" rows="10"></textarea>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.markUnEligible">
      <mat-form-field appearance="outline">
        <textarea [(ngModel)]="data.markUnEligibleReason" matInput placeholder="Your comments..." rows="6"></textarea>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.commentField">
      <mat-form-field style="width: 100%;" appearance="outline">
        <textarea cols="10" [(ngModel)]="data.comments" matInput placeholder="Your comments..." rows="6"></textarea>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.changeSpdStatus">
      <mat-form-field appearance="outline">
        <mat-select placeholder="Select a Status" [(ngModel)]="data.spdStatus">
          <mat-option *ngFor="let object of spdStatuses;" [value]="object">
            {{object}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="controls" *ngIf="data?.enableLoading">
      <mat-progress-spinner diameter="35" mode="indeterminate"></mat-progress-spinner>
    </div>

    <div class="controls" *ngIf="data?.enableGia">
      <section class="example-section d-flex flex-column">
        <label id="answer" class="example-margin">Did FIP submit all documents:</label>
        <mat-radio-group>
          <mat-radio-button class="example-margin mr-3" value="yes">Yes</mat-radio-button>
          <mat-radio-button class="example-margin" value="no">No</mat-radio-button>
        </mat-radio-group>
      </section>
      <section class="example-section d-flex flex-column">
        <label id="answer" class="example-margin">All appraisals done:</label>
        <mat-radio-group>
          <mat-radio-button class="example-margin mr-3" value="yes">Yes</mat-radio-button>
          <mat-radio-button class="example-margin" value="no">No</mat-radio-button>
        </mat-radio-group>
      </section>
      <section class="example-section d-flex flex-column">
        <label id="answer" class="example-margin">Did FIP identify all schemes:</label>
        <mat-radio-group>
          <mat-radio-button class="example-margin mr-3" value="yes">Yes</mat-radio-button>
          <mat-radio-button class="example-margin" value="no">No</mat-radio-button>
        </mat-radio-group>
      </section>
      <section class="example-section d-flex flex-column">
        <label id="answer" class="example-margin">Confirm Board decision:</label>
        <mat-radio-group>
          <mat-radio-button class="example-margin mr-3" value="approved">Approved</mat-radio-button>
          <mat-radio-button class="example-margin" value="rejected">Rejected</mat-radio-button>
        </mat-radio-group>
      </section>
    </div>

    <div class="controls" *ngIf="data?.evidanceFlag">
      <mat-form-field class="col col-md-12" appearance="outline">
        <mat-label>Add Your Remarks</mat-label>
        <textarea matInput placeholder="Add comments" [(ngModel)]="data.comments"></textarea>
      </mat-form-field>
    </div>

  </div>

  <div mat-dialog-actions>
    <button *ngIf="data?.add" color="primary" mat-raised-button style="margin-right:10px;" (click)="cancel()">{{
      data.confirmText }}</button>
    <button *ngIf="data?.confirm" color="warn" mat-raised-button style="margin-right:10px;" (click)="cancel()">{{
      data.cancelText }}</button>
    <button [disabled]="!data.startDate || !data.endDate" *ngIf="data?.confirm" color="primary" mat-raised-button
      (click)="confirm()">{{ data.confirmText }}</button>
    <!-- GM CONTROLS -->
    <button *ngIf="data?.assignToGm" mat-raised-button (click)="cancel()" color="warn" class="m-2">{{'no' |
      uppercase}}</button>
    <button *ngIf="data?.assignToGm" mat-raised-button (click)="assignToGm('ASSIGN')" color="primary"
      class="m-2">{{'yes' | uppercase}}</button>
    <!-- OFFER LETTER -->
    <button *ngIf="data?.offerLetter" mat-raised-button (click)="cancel()" color="warn" class="m-2">{{data.cancelText |
      uppercase}}</button>
    <button *ngIf="data?.offerLetter" [disabled]="!data.endDate" mat-raised-button
      (click)="uploadOfferLetter('ASSIGN', data.endDate, data.comments)" color="primary" class="m-2">{{data.confirmText
      |
      uppercase}}</button>


    <button *ngIf="data?.selectThematic && data?.taSelectionType !== 'eligibility'"
      [disabled]="!applyAsJv.value || (applyAsJv.value && !jvUsers.valid)" mat-raised-button
      (click)="addThematicAreas()" color="primary" class="m-2">{{data.confirmText |
      uppercase}}</button>

    <button *ngIf="data?.selectThematic && data?.taSelectionType === 'eligibility'"
      [disabled]="(!areas.value || areas.value?.length === 0) || checkAreasInfo()" mat-raised-button
      (click)="addThematicAreas()" color="primary" class="m-2">{{data.confirmText |
      uppercase}}</button>

    <button [disabled]="applyAsJv.value" *ngIf="data?.selectThematic && data?.taSelectionType !== 'eligibility'"
      mat-raised-button (click)="addThematicAreas()" color="warn" class="m-2">
      {{data.cancelText | uppercase}}
    </button>
    <button *ngIf="data?.selectThematic" mat-raised-button (click)="cancel()" color="warn" class="m-2">
      {{'Cancel' | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.proposal_initmation" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.proposal_initmation" color="primary" [disabled]="proposalSections.value?.length === 0
    || !proposalSections.value || !data?.comments" (click)="proposalIntimation()">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.subProcess" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.subProcess" color="primary"
      [disabled]="!data?.subProcessNumber || !data?.subProcessName" (click)="commenceSubProcessScheme()">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.markUnEligible" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button [disabled]="data.markUnEligibleReason === ''" mat-raised-button *ngIf="data?.markUnEligible"
      (click)="closeMarkUnEligible()" color="primary">
      {{'update' | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.commentField" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button [disabled]="data.commentField === null || data.commentField === ''" mat-raised-button
      *ngIf="data?.commentField" (click)="closeCommentField()" color="primary">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.enableGia" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.enableGia" (click)="enableGia('GIA')" color="accent">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.confirmAction" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.confirmAction && !data?.confirmComments" (click)="approveAction()"
      color="accent">
      {{data.confirmText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.confirmAction && data?.confirmComments" (click)="approveActionWithComments()"
      color="accent">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.ceoDecision" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.ceoDecision" (click)="ceoApprovalWithComments('APPROVED')" color="accent">
      {{'approved' | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.ceoDecision" (click)="ceoApprovalWithComments('REJECTED')" color="accent">
      {{'rejected' | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.changeSpdStatus" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.changeSpdStatus" (click)="changeSpdStatus()" color="accent">
      {{data.confirmText | uppercase}}
    </button>

    <button mat-raised-button *ngIf="data?.evidanceFlag" (click)="cancel()" color="warn">
      {{data.cancelText | uppercase}}
    </button>
    <button mat-raised-button *ngIf="data?.evidanceFlag" (click)="closeCommentField()" color="accent">
      {{data.confirmText | uppercase}}
    </button>
  </div>
</div>